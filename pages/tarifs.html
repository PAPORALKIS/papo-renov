<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Tarifs - Papo Rénov</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../style.css"><link rel="preconnect" href="https://cdnjs.cloudflare.com">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<style>
:root{
  --primary-color:#007bff;
  --secondary-color:#212529;
  --background-light:#f4f7f9;
  --card-background:#ffffff;
  --price-accent:#28a745;
  --accent-orange:#ffc107;
  --border-light:#e9ecef;
  --shadow-color:rgba(0,0,0,.16);
  --dark-blue-logo:#0a1f44;
  --chip:#eef2f7;
  --chip-text:#344054;

  /* variables responsive cartes */
  --sheet-w: clamp(150px, 18vw, 260px);
  --sheet-min-h: clamp(260px, 42vh, 360px);
  --content-max: min(1600px, 100%);
  --footer-h: 40px; /* hauteur approx. pour éviter le chevauchement */
}
*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  font-family:'Poppins',sans-serif;
  background:var(--background-light);
  color:var(--secondary-color);
  line-height:1.6;
  min-width:320px;
  overflow-x:hidden; /* évite tout scroll horizontal parasite */
  padding-bottom: var(--footer-h); /* pour ne pas masquer le contenu par le footer fixe */
  min-height: 100vh; /* Assure que le footer est bien en bas même avec peu de contenu */
}

/* --- NAV --- */
header{
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  background-color: var(--card-background); /* Rendre le header visible si l'image de fond est foncée */
}
@media (max-width: 992px) {
  header{ flex-direction: column; padding: 10px 0; }
  header .logo{ margin-bottom: 10px; }
  header nav{ width: 100%; }
}
nav ul li a.active{color:var(--primary-color);font-weight:700}
nav ul{-ms-overflow-style:none;scrollbar-width:none;overflow-x:auto}
nav ul::-webkit-scrollbar{display:none}

/* --- LOGO OVERLAY SECRET --- */
header .logo{position:relative;display:inline-block}
#logo-overlay-partner{
  position:absolute;inset:0;
  background:transparent;
  cursor:pointer;
  /* accessibilité silencieuse */
}
#logo-overlay-partner span{
  position:absolute;inset:0;opacity:0; /* invisible */
}

/* --- HERO --- */
.content-section{padding:20px 20px 40px;display:flex;flex-direction:column;align-items:center;text-align:center;position:relative}
h1{
  color:#fff;
  margin:0 0 20px;
  font-weight:800;
  font-size:2rem;
  text-shadow: 0 2px 4px rgba(0,0,0,0.4); /* contraste sur fond image */
}

h1::after{content:'';display:block;width:80px;height:4px;background:var(--primary-color);margin:18px auto 0;border-radius:2px}
.subtitle{margin:10px 0 36px;color:#6c757d}

/* --- TABLET MOCKUP --- */
.tablet{position:relative;width:min(100%,980px);aspect-ratio:16/9;border-radius:28px;background:#111;box-shadow:0 40px 80px rgba(0,0,0,.25);overflow:hidden;z-index:1}
.tablet::before{content:'';position:absolute;inset:0;border-radius:28px;box-shadow:inset 0 0 0 10px #0d0d0d, inset 0 0 0 12px #222;pointer-events:none}
.tablet-camera{position:absolute;right:22px;top:50%;transform:translateY(-50%);width:34px;height:34px;border-radius:50%;background:#1f1f1f;box-shadow:inset 0 2px 6px rgba(255,255,255,.06)}
.tablet-screen{position:absolute;inset:20px 24px;border-radius:18px;overflow:hidden;background:#000}
.slider{position:absolute;inset:0}
.slider img{position:absolute;inset:0;margin:auto;width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity .8s ease}
.slider img.active{opacity:1}

/* --- BARRE OUTILS FICHES (Optimisé pour mobile/tablette) --- */
.tools{
  width:min(1200px,100%);
  display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;
  margin:18px auto 8px;padding:0 8px;z-index:2
}
.view-switch{display:flex;gap:8px}
.view-switch .switch{
  border:1px solid var(--border-light);background:#fff;border-radius:10px;
  padding:8px 12px;cursor:pointer;font-weight:600;display:flex;align-items:center;gap:8px;
}
.view-switch .switch.active{background:var(--primary-color);color:#fff;border-color:var(--primary-color)}
.search-wrap{flex:1;display:flex;justify-content:flex-end}
.search-wrap input{
  width: min(420px,100%); padding:10px 12px;border:1px solid var(--border-light);border-radius:10px;outline:none;
  box-shadow: 0 1px 2px rgba(0,0,0,.02)
}

/* --- CHIPS (scroll horizontal sur petit écran) --- */
.chips{
  width:min(1200px,100%);
  display:flex;gap:8px;flex-wrap:nowrap; /* Important: nowrop pour le scroll */
  justify-content:flex-start; /* Aligner à gauche pour le scroll */
  margin:6px auto 6px;padding:0 8px;
  overflow-x:auto; /* Permettre le défilement */
  scrollbar-width:none;
  -webkit-overflow-scrolling: touch;
}
.chips::-webkit-scrollbar{display:none}
.chip{
  flex-shrink: 0; /* Empêche les chips de se réduire */
  background:var(--chip);color:var(--chip-text);
  padding:8px 12px;border-radius:999px;font-size:.9rem;border:1px solid var(--border-light);
  cursor:pointer;user-select:none;transition:transform .15s ease, background .2s ease
}
.chip:hover{transform:translateY(-1px)}
.chip.active{background:var(--primary-color);color:#fff;border-color:var(--primary-color)}

/* --- FICHES (deux modes) --- */
.sheets{position:relative;width:min(1450px,100%);margin:30px auto 40px;padding:0 8px;z-index:2}

/* MODE 1 : PILE 3D (seulement sur grand écran) */
.sheets.pile{display:flex;flex-wrap:nowrap;justify-content:center;gap:0;perspective:1500px}
.sheet{
  width:160px;
  height:320px;
  flex-shrink:0;
  background:var(--card-background);border-radius:16px;
  box-shadow:0 20px 50px rgba(0,0,0,.25),0 0 0 1px rgba(0,0,0,.08);
  padding:12px;text-align:left;cursor:pointer;
  transform:rotateZ(var(--rot,0deg)) translateY(var(--ty,0px)) translateX(var(--tx,0px)) rotateY(var(--ry,0deg));
  transition:transform .35s ease,box-shadow .35s ease,border-color .35s ease;
  border:1px solid var(--border-light);z-index:var(--z-idx);margin-right:-20px;overflow:hidden
}
.sheets.pile article:nth-child(1){--rot:-4deg;--ty:10px;--tx:0px;--ry:-4deg;--z-idx:4}
.sheets.pile article:nth-child(2){--rot:3deg;--ty:-10px;--tx:0px;--ry:0deg;--z-idx:3}
.sheets.pile article:nth-child(3){--rot:-2deg;--ty:5px;--tx:0px;--ry:4deg;--z-idx:2}
.sheets.pile article:nth-child(4){--rot:5deg;--ty:-5px;--tx:0px;--ry:-3deg;--z-idx:1;margin-right:0}
.sheets.pile article:nth-child(5){--rot:-4deg;--ty:10px;--tx:0px;--ry:-4deg;--z-idx:4}
.sheets.pile article:nth-child(6){--rot:3deg;--ty:-10px;--tx:0px;--ry:0deg;--z-idx:3}
.sheets.pile article:nth-child(7){--rot:-2deg;--ty:5px;--tx:0px;--ry:4deg;--z-idx:2}
.sheets.pile article:nth-child(8){--rot:5deg;--ty:-5px;--tx:0px;--ry:-3deg;--z-idx:1;margin-right:0}
.sheets.pile article:nth-child(9){--rot:-4deg;--ty:10px;--tx:0px;--ry:-4deg;--z-idx:4}
.sheets.pile article:nth-child(10){--rot:3deg;--ty:-10px;--tx:0px;--ry:0deg;--z-idx:3}
.sheets.pile article:nth-child(11){--rot:-2deg;--ty:5px;--tx:0px;--ry:4deg;--z-idx:2}

/* MODE 2 : GRILLE XL (par défaut sur les petits écrans) */
.sheets.grid{
  display:grid;
  /* Nouveau: minmax flexible pour un meilleur responsive (1, 2 ou 3 colonnes) */
  grid-template-columns: repeat(auto-fill, minmax(clamp(200px, 45vw, 300px), 1fr));
  justify-content: center; /* Centrer si le nombre de cartes ne remplit pas la dernière ligne */
  gap:16px
}
.sheets.grid .sheet{
  margin-right:0;width:auto;height:auto;min-height:240px;
  transform:none !important; /* Force l'annulation de la 3D */
  display:flex;flex-direction:column;justify-content:space-between;
  padding:20px
}

/* Carte — contenu */
.sheet:hover{
  transform:translateY(calc(var(--ty,0px) - 8px)) rotateZ(var(--rot,0deg)) scale(1.04) rotateY(var(--ry,0deg));
  box-shadow:0 50px 120px rgba(0,0,0,.35);
  border-color:rgba(0,123,255,.3)
}
.sheets.grid .sheet:hover{transform:translateY(-6px) scale(1.02)}
.sheet .head{display:flex;align-items:center;gap:8px;margin-bottom:8px;flex-direction:row;text-align:left}
.sheet .badge{background:var(--dark-blue-logo);color:#fff;font-weight:700;font-size:.78rem;padding:4px 8px;border-radius:999px}
.sheet .icon{font-size:20px;color:var(--primary-color)}
.sheet h3{margin:6px 0 8px;font-size:1.05rem;line-height:1.2}
.sheet p{margin:0 0 10px;color:#6c757d;font-size:.9rem;line-height:1.35}
.sheet .from{color:var(--price-accent);font-weight:800;margin-top:6px;font-size:1rem}
.sheet .actions{display:flex;gap:8px;margin-top:10px}
.sheet .btn{flex:1;display:inline-flex;align-items:center;justify-content:center;gap:6px;padding:10px 12px;border-radius:10px;border:1px solid var(--border-light);background:#fff;cursor:pointer;font-weight:700;font-size:.9rem;text-align:center}
.sheet .btn.primary{background:var(--primary-color);border-color:var(--primary-color);color:#fff}
.sheet .btn:active{transform:translateY(1px)}

/* --- MODALES DÉTAILS --- */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:1000;justify-content:center;align-items:center;padding:20px}
.detail-modal-content{background:var(--card-background);padding:34px;border-radius:14px;text-align:left;width:min(920px,94vw);max-height:88vh;overflow:auto;position:relative;box-shadow:0 30px 80px rgba(0,0,0,.35)}
.detail-modal-content h3{color:var(--primary-color);font-size:1.6rem;border-bottom:3px solid var(--accent-orange);padding-bottom:8px;margin:0 0 20px;text-align:center}
.detail-modal-content ul{list-style:none;padding:0;margin:0}
.detail-modal-content li{display:flex;justify-content:space-between;gap:16px;padding:12px 0;border-bottom:1px dashed var(--border-light);font-size:1rem}
.detail-modal-content li strong{color:var(--price-accent)}
.close-btn{position:absolute;top:12px;right:12px;width:34px;height:34px;border-radius:50%;border:none;background:var(--secondary-color);color:#fff;cursor:pointer}
.close-btn:hover{background:#dc3545}

/* PARTENAIRE VIEW (masquée ici) */
.partner-prices{display:none}

/* --- BREAKPOINTS RESPONSIVE (Optimisation) --- */

/* < 992px : réduire légèrement la typo des cartes */
@media (max-width:992px){
  .sheet h3{font-size:1rem}
  .sheet p{font-size:.85rem}
  header nav ul{justify-content: center;}
}

/* <= 1280px : Affichez la grille par défaut sur tablette (même en paysage) et annulez la 3D */
@media (max-width:1280px){
  /* Chips : assuré d'être scrollable et aligné à gauche */
  .chips{
    overflow-x:auto;white-space:nowrap;justify-content:flex-start;scrollbar-width:none;padding-bottom:4px
  }
  .chips::-webkit-scrollbar{display:none}
  
  /* Désactive la pile 3D et passe en grille */
  .sheets.pile{
    flex-wrap: wrap;
    justify-content: center;
    gap: 16px;
    perspective: none;
  }
  .sheets.pile .sheet{
    width: auto;
    min-width: 200px; /* Assure une taille minimale */
    height: auto;
    margin-right: 0;
    transform: none !important;
  }

  /* Ajustement de la section de contenu */
  .content-section{padding-top:40px}
  h1{font-size:1.8rem;}
  
  /* Modale des détails pour tablette */
  .detail-modal-content{width:min(700px, 94vw); padding: 25px;}
}

/* Mobiles (<= 768px) : Mise en page en colonne */
@media (max-width:768px){
  .content-section{padding-top:20px; padding-left: 10px; padding-right: 10px;}
  .tablet{aspect-ratio:4/3}
  
  /* Outils en colonne */
  .tools{gap:8px; flex-direction: column; padding: 0 10px;}
  .view-switch{width: 100%; justify-content: space-around;}
  .search-wrap{flex-basis:100%;justify-content:center; width: 100%;}
  .search-wrap input{width: 100%;}
  
  /* Chips */
  .chips{padding:0 10px; margin-top: 10px;}
  
  /* Cartes */
  .sheets.grid{
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); /* Une colonne plus large sur petit écran */
    gap: 12px;
    padding: 0 10px;
  }
  
  /* Modale */
  .detail-modal-content{padding: 20px;}
  .detail-modal-content h3{font-size: 1.4rem;}
  .detail-modal-content li{font-size: .9rem; flex-direction: column; align-items: flex-start;}
  .detail-modal-content li strong{align-self: flex-end;}
}

/* Utra-wide : contenir le contenu au centre */
@media (min-width:1920px){
  .content-section, .tools, .chips, .sheets{max-width:1600px}
}

@supports not (aspect-ratio:1){
  .tablet{height:0;padding-top:56.25%}
  .tablet-screen{position:absolute;top:20px;left:24px;right:24px;bottom:20px}
}

/* --- FOND D'ÉCRAN SLIDER --- */
.background-slider {
  position: fixed;
  inset: 0;
  z-index: 0;
  overflow: hidden;
}
.background-slider::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.45); /* voile sombre */
  backdrop-filter: blur(6px); /* flou doux */
}
.background-slider img {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: 0;
  transition: opacity 2s ease;
}
.background-slider img.active {
  opacity: 1;
}

/* Place le contenu par-dessus le fond */
header, .content-section, footer {
  position: relative;
  z-index: 2;
}

/* --- FOOTER ULTRA FIN FIXE --- */
footer{
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  z-index: 5;
}

footer .legal{
  display: block;
  text-align: center;
  margin: 0;
  padding: 6px 10px;      /* très fin */
  font-size: clamp(10px, 0.8vw, 12px);
  line-height: 1.1;
  opacity: .6;
  color: #fff;            /* blanc lisible sur fond sombre */
  letter-spacing: 0.3px;
  background: rgba(0,0,0,.35);  /* léger fond sombre transparent */
  backdrop-filter: blur(4px);
  border-top: 1px solid rgba(255,255,255,.15);
  user-select: none;
}
</style>
</head>
<body>

<div class="background-slider" id="background-slider">
  <img src="../img/CHBR1.jpg" alt="Chambre rénovée" class="active">
        <img src="../img/CUIEXT2.jpg" alt="Cuisine extérieure 2">
        <img src="../img/CUIEXT4.jpg" alt="Cuisine extérieure 4">
        <img src="../img/CUIEXT5.jpg" alt="Cuisine extérieure 5">
        <img src="../img/CUIEXT6.jpg" alt="Cuisine extérieure 6">
        <img src="../img/CUIMARS1.jpg" alt="Cuisine Mars 1">
        <img src="../img/CUIMARS2.jpg" alt="Cuisine Mars 2">
        <img src="../img/CUIMARS3.jpg" alt="Cuisine Mars 3">
        <img src="../img/CUIMARS4.jpg" alt="Cuisine Mars 4">
        <img src="../img/Chambre SPACEO.png" alt="Chambre Spaceo">
        <img src="../img/DRESSMARS1.jpg" alt="Dressing Mars 1">
        <img src="../img/DRESSMARS2.jpg" alt="Dressing Mars 2">
        <img src="../img/DRESSMARS3.jpg" alt="Dressing Mars 3">
        <img src="../img/DRESSMARS4.jpg" alt="Dressing Mars 4">
        <img src="../img/Iso2.jpg" alt="Isolation 2">
        <img src="../img/Iso3.jpg" alt="Isolation 3">
        <img src="../img/Iso4.jpg" alt="Isolation 4">
        <img src="../img/Iso5.jpg" alt="Isolation 5">
        <img src="../img/Iso6.jpg" alt="Isolation 6">
        <img src="../img/SDB1.jpg" alt="Salle de bain 1">
        <img src="../img/SDB2.jpg" alt="Salle de bain 2">
        <img src="../img/SDB3.jpg" alt="Salle de bain 3">
        <img src="../img/SDB4.jpg" alt="Salle de bain 4">
        <img src="../img/SDB5.jpg" alt="Salle de bain 5">
        <img src="../img/WC1.jpg" alt="WC 1">
        <img src="../img/WC2.jpg" alt="WC 2">
        <img src="../img/aumetz-avant-1.jpeg" alt="Aumetz avant">
        <img src="../img/aumetz10.jpeg" alt="Aumetz 10">
        <img src="../img/aumetz11.jpeg" alt="Aumetz 11">
        <img src="../img/aumetz12.jpeg" alt="Aumetz 12">
        <img src="../img/aumetz14.jpeg" alt="Aumetz 14">
        <img src="../img/aumetz15.jpeg" alt="Aumetz 15">
        <img src="../img/aumetz16.jpeg" alt="Aumetz 16">
        <img src="../img/aumetz17.jpeg" alt="Aumetz 17">
        <img src="../img/aumetz18.jpeg" alt="Aumetz 18">
        <img src="../img/aumetz5.jpeg" alt="Aumetz 5">
        <img src="../img/aumetz6.jpeg" alt="Aumetz 6">
        <img src="../img/aumetz7.jpeg" alt="Aumetz 7">
        <img src="../img/aumetz8.jpeg" alt="Aumetz 8">
        <img src="../img/aumetz9.jpeg" alt="Aumetz 9">
        <img src="../img/escalier SPACEO.png" alt="Escalier Spaceo">
        <img src="../img/ext1.jpg" alt="Extérieur 1">
        <img src="../img/ext2.jpg" alt="Extérieur 2">
        <img src="../img/iso1.jpg" alt="Isolation 1">
        <img src="../img/martegauxB.jpg" alt="Martegaux B">
        <img src="../img/martegauxC.jpg" alt="Martegaux C">
        <img src="../img/martegauxD.jpg" alt="Martegaux D">
        <img src="../img/martegauxE.jpg" alt="Martegaux E">
        <img src="../img/martegauxavant1.jpg" alt="Martegaux avant 1">
        <img src="../img/martegauxavant2.jpg" alt="Martegaux avant 2">
        <img src="../img/martegauxavant3.jpg" alt="Martegaux avant 3">
        <img src="../img/meuble-laura-1.jpg" alt="Meuble Laura 1">
        <img src="../img/meuble-laura-2.jpg" alt="Meuble Laura 2">
        <img src="../img/meuble-laura-3.jpg" alt="Meuble Laura 3">
        <img src="../img/renoperier1.jpg" alt="Réno Périer 1">
        <img src="../img/renoperier2.jpg" alt="Réno Périer 2">
        <img src="../img/renoperier3.jpg" alt="Réno Périer 3">
        <img src="../img/renoperier4.jpg" alt="Réno Périer 4">
        <img src="../img/renoperier5.jpg" alt="Réno Périer 5">
        <img src="../img/renoperier6.jpg" alt="Réno Périer 6">
        <img src="../img/velaux0.jpg" alt="Velaux 0">
        <img src="../img/velaux1.jpg" alt="Velaux 1">
        <img src="../img/velaux2.jpg" alt="Velaux 2">
        <img src="../img/velaux3.jpg" alt="Velaux 3">
</div>

<header>
  <div class="logo">
    <img src="../img/logo.png" alt="Logo Papo Rénov">
    <!-- OVERLAY SECRET PARTENAIRES (clic sur le logo) -->
    <div id="logo-overlay-partner" aria-label="Accès partenaires (secret)"><span></span></div>
  </div>
  <nav>
    <ul>
      <li><a href="../index.html">Accueil</a></li>
      <li><a href="devis.html">Demande de devis</a></li>
      <li><a href="realisations.html">Mes réalisations</a></li>
      <li><a class="active" href="tarifs.html">Tarifs</a></li>
      <li><a href="planning.html">Planning</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="avis.html">Avis clients</a></li>
      <li><a href="courtage-cuisine.html">Courtage Cuisine</a></li>
    </ul>
  </nav>
</header>

<section class="content-section">
  <h1>Tarifs rénovation & agencement</h1>

 

  <!-- OUTILS : switch vue + recherche -->
  <div class="tools" aria-label="Outils d’affichage et recherche">
    <div class="view-switch" role="tablist" aria-label="Changer de vue">
      <button class="switch active" id="btnPile" aria-selected="true"><i class="fa-solid fa-layer-group"></i> Pile 3D</button>
      <button class="switch" id="btnGrid" aria-selected="false"><i class="fa-solid fa-table-cells-large"></i> Grille XL</button>
    </div>
    <div class="search-wrap">
      <input id="search" type="search" placeholder="Rechercher une catégorie (ex : cuisine, peinture…)" aria-label="Rechercher une catégorie">
    </div>
  </div>

  <!-- CHIPS filtres -->
  <div class="chips" id="chips">
    <span class="chip active" data-filter="*">Tout</span>
    <span class="chip" data-filter="d-molition-pr-paration">Démolition</span>
    <span class="chip" data-filter="cloisons-pl-trerie">Cloisons</span>
    <span class="chip" data-filter="lectricit">Électricité</span>
    <span class="chip" data-filter="plomberie-sanitaire">Plomberie</span>
    <span class="chip" data-filter="sols-rev-tements">Sols</span>
    <span class="chip" data-filter="peinture">Peinture</span>
    <span class="chip" data-filter="menuiserie-int-rieure">Menuiserie</span>
    <span class="chip" data-filter="cuisine-pose">Cuisine</span>
    <span class="chip" data-filter="salle-de-bains">Salle de bains</span>
    <span class="chip" data-filter="finitions-divers">Finitions</span>
    <span class="chip" data-filter="d-placements-main-d-uvre">Déplacements</span>
  </div>

  <!-- Fiches PUBLIC (désormais bascule entre pile|grid) -->
  <div class="sheets pile" id="public-prices">

    <article class="sheet" data-category="d-molition-pr-paration">
      <div class="head">
        <span class="badge">Démolition</span>
        <i class="icon fas fa-list-check" aria-hidden="true"></i>
      </div>
      <h3>Démolition & Préparation</h3>
      <p>Tarifs indicatifs issus de ma base Papo-Rénov (colonne prix min).</p>
      <div class="from">À partir de 8 € / m²</div>
      <div class="actions"><button class="btn primary open-details"><i class="fa-solid fa-magnifying-glass"></i> Voir détails</button></div>
    </article>

    <article class="sheet" data-category="cloisons-pl-trerie">
      <div class="head">
        <span class="badge">Cloisons</span>
        <i class="icon fas fa-brush" aria-hidden="true"></i>
      </div>
      <h3>Cloisons & Plâtrerie</h3>
      <p>Tarifs indicatifs issus de ma base Papo-Rénov (colonne prix min).</p>
      <div class="from">À partir de 50 € / m²</div>
      <div class="actions"><button class="btn primary open-details"><i class="fa-solid fa-magnifying-glass"></i> Voir détails</button></div>
    </article>

    <article class="sheet" data-category="lectricit">
      <div class="head">
        <span class="badge">Électricité</span>
        <i class="icon fas fa-bolt" aria-hidden="true"></i>
      </div>
      <h3>Électricité</h3>
      <p>Tarifs indicatifs issus de ma base Papo-Rénov (colonne prix min).</p>
      <div class="from">À partir de 250 € / unité</div>
      <div class="actions"><button class="btn primary open-details"><i class="fa-solid fa-magnifying-glass"></i> Voir détails</button></div>
    </article>

    <article class="sheet" data-category="plomberie-sanitaire">
      <div class="head">
        <span class="badge">Plomberie</span>
        <i class="icon fas fa-bath" aria-hidden="true"></i>
      </div>
      <h3>Plomberie & Sanitaire</h3>
      <p>Tarifs indicatifs issus de ma base Papo-Rénov (colonne prix min).</p>
      <div class="from">À partir de 45 € / ml</div>
      <div class="actions"><button class="btn primary open-details"><i class="fa-solid fa-magnifying-glass"></i> Voir détails</button></div>
    </article>

    <article class="sheet" data-category="sols-rev-tements">
      <div class="head">
        <span class="badge">Sols</span>
        <i class="icon fas fa-paint-roller" aria-hidden="true"></i>
      </div>
      <h3>Sols & Revêtements</h3>
      <p>Tarifs indicatifs issus de ma base Papo-Rénov (colonne prix min).</p>
      <div class="from">À partir de 15 € / m²</div>
      <div class="actions"><button class="btn primary open-details"><i class="fa-solid fa-magnifying-glass"></i> Voir détails</button></div>
    </article>

    <article class="sheet" data-category="peinture">
      <div class="head">
        <span class="badge">Peinture</span>
        <i class="icon fas fa-fill-drip" aria-hidden="true"></i>
      </div>
      <h3>Peinture</h3>
      <p>Tarifs indicatifs issus de ma base Papo-Rénov (colonne prix min).</p>
      <div class="from">À partir de 5 € / m²</div>
      <div class="actions"><button class="btn primary open-details"><i class="fa-solid fa-magnifying-glass"></i> Voir détails</button></div>
    </article>

    <article class="sheet" data-category="menuiserie-int-rieure">
      <div class="head">
        <span class="badge">Menuiserie</span>
        <i class="icon fas fa-door-closed" aria-hidden="true"></i>
      </div>
      <h3>Menuiserie Intérieure</h3>
      <p>Tarifs indicatifs issus de ma base Papo-Rénov (colonne prix min).</p>
      <div class="from">À partir de 180 € / unité</div>
      <div class="actions"><button class="btn primary open-details"><i class="fa-solid fa-magnifying-glass"></i> Voir détails</button></div>
    </article>

    <article class="sheet" data-category="cuisine-pose">
      <div class="head">
        <span class="badge">Cuisine</span>
        <i class="icon fas fa-kitchen-set" aria-hidden="true"></i>
      </div>
      <h3>Cuisine (Pose)</h3>
      <p>Tarifs indicatifs issus de ma base Papo-Rénov (colonne prix min).</p>
      <div class="from">À partir de 200 € / jour</div>
      <div class="actions"><button class="btn primary open-details"><i class="fa-solid fa-magnifying-glass"></i> Voir détails</button></div>
    </article>

    <article class="sheet" data-category="salle-de-bains">
      <div class="head">
        <span class="badge">SDB</span>
        <i class="icon fas fa-shower" aria-hidden="true"></i>
      </div>
      <h3>Salle de Bains</h3>
      <p>Tarifs indicatifs issus de ma base Papo-Rénov (colonne prix min).</p>
      <div class="from">À partir de 300 € / forfait</div>
      <div class="actions"><button class="btn primary open-details"><i class="fa-solid fa-magnifying-glass"></i> Voir détails</button></div>
    </article>

    <article class="sheet" data-category="finitions-divers">
      <div class="head">
        <span class="badge">Finitions</span>
        <i class="icon fas fa-screwdriver-wrench" aria-hidden="true"></i>
      </div>
      <h3>Finitions & Divers</h3>
      <p>Tarifs indicatifs issus de ma base Papo-Rénov (colonne prix min).</p>
      <div class="from">À partir de 6 € / ml</div>
      <div class="actions"><button class="btn primary open-details"><i class="fa-solid fa-magnifying-glass"></i> Voir détails</button></div>
    </article>

    <article class="sheet" data-category="d-placements-main-d-uvre">
      <div class="head">
        <span class="badge">Déplacements</span>
        <i class="icon fas fa-truck-fast" aria-hidden="true"></i>
      </div>
      <h3>Déplacements & Main d’œuvre</h3>
      <p>Tarifs indicatifs issus de ma base Papo-Rénov (colonne prix min).</p>
      <div class="from">À partir de 30 € / forfait</div>
      <div class="actions"><button class="btn primary open-details"><i class="fa-solid fa-magnifying-glass"></i> Voir détails</button></div>
    </article>

  </div>

  
</section>

<!-- MODALE DÉTAILS -->
<div class="modal-overlay" id="detail-modal" role="dialog" aria-modal="true" aria-labelledby="detail-title">
  <div class="detail-modal-content">
    <button class="close-btn" id="close-detail-modal" aria-label="Fermer">&times;</button>
    <div id="modal-details-content"></div>
  </div>
</div>

<footer>
  <small class="legal">&copy; 2025 Papo Rénov — Tous droits réservés</small>
</footer>


<script>
/* FOND D'ÉCRAN SLIDER AUTO */
(function(){
  const slides = Array.from(document.querySelectorAll('#background-slider img'));
  let i = 0;
  setInterval(()=>{
    slides[i].classList.remove('active');
    i = (i + 1) % slides.length;
    slides[i].classList.add('active');
  }, 4000);
})();
</script>

<!-- DONNÉES TARIFS PUBLIC — DYNAMIQUE DEPUIS SHEETS -->
<script>
// === 1) CONFIG API (même URL que sur la page partenaire) ===================
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbww7_mLiUesnyQQHbQjwto1XsbtePXVW0UHU_sLYFLqCOFd0diTanXBWJVCqpePADzwow/exec";

// (facultatif) Catégories à masquer totalement
const HIDE_CATEGORIES = ["C) Directives"];

// === 2) Helpers =============================================================
function euro(x){
  if(x===null || x===undefined || isNaN(x)) return '—';
  return (parseFloat(x).toFixed(2)+' €').replace('.00','');
}
function slugifyCategory(name){
  return String(name||'').toLowerCase()
    .normalize('NFD').replace(/[\u0300-\u036f]/g,'')   // retire accents
    .replace(/[^a-z0-9]+/g,'-')                        // tirets
    .replace(/^-+|-+$/g,'');                           // bords propres
}
function isHiddenCategory(cat){
  const n=(cat||'').trim().toLowerCase();
  return HIDE_CATEGORIES.some(h=> (h||'').trim().toLowerCase()===n);
}

// === 3) Charge les tarifs depuis l'API et CONSTRUIT priceDetails ===========
async function getPriceDetails(){
  // Appel API
  const r = await fetch(`${WEB_APP_URL}?path=tarifs`, { cache: 'no-store' });
  const j = await r.json();
  const rows = Array.isArray(j) ? j : (j.tarifs || []);

  // Groupage par catégorie
  const grouped = {};
  for(const t of rows){
    const cat = (t.categorie || 'Autres').trim();
    if(isHiddenCategory(cat)) continue;
    if(!grouped[cat]) grouped[cat]=[];
    grouped[cat].push({
      label: (t.tache || '').trim(),                                       // libellé = "Tâche"
      price: (t.prix_min!=null
              ? `${euro(parseFloat(String(t.prix_min).toString().replace(',','.')))}`
              : '—') + (t.unite ? ` / ${t.unite}` : '')                    // "12 € / m²"
      // si tu veux ajouter les notes en petit : + (t.notes? ` — ${t.notes}` : '')
    });
  }

  // Transformation → même forme que l'ancien bloc priceDetails
  const out = {};
  Object.keys(grouped).forEach(cat=>{
    const key = slugifyCategory(cat);  // ex: "Démolition & Préparation" → "demolition-preparation"
    out[key] = {
      title: `${cat} - Tarifs Publics (HT)`,
      items: grouped[cat]
    };
  });

  return out;
}

// === 4) Expose (compat descendante) + hook de rendu ========================
// ⬇️ window.priceDetails est créée dynamiquement, puis on notifie la page.
(async ()=>{
  try{
    window.priceDetails = await getPriceDetails();
    // Si tu as déjà une fonction de rendu existante qui lisait priceDetails,
    // appelle-la ici :
    if (typeof window.renderPublicPrice === 'function') {
      window.renderPublicPrice(window.priceDetails);
    }
    // Sinon, tu peux écouter l’événement ci-dessous ailleurs pour lancer ton rendu :
    document.dispatchEvent(new CustomEvent('priceDetails:ready', { detail: window.priceDetails }));
  }catch(err){
    console.error('Échec de chargement des tarifs publics :', err);
  }
})();
</script>

 <script>
/* UTIL — formate proprement le texte de prix (évite “€ / €/m²”) */
function cleanPrice(txt){
  return String(txt)
    .replace(/\s*€\s*\/\s*€\s*/g,' € / ')    // double €
    .replace(/\s{2,}/g,' ')                  // espaces multiples
    .trim();
}

/* OUVERTURE DES DÉTAILS */
const detailModal = document.getElementById('detail-modal');
const modalDetailsContent = document.getElementById('modal-details-content');
document.querySelectorAll('.open-details, .sheet').forEach(el=>{
  el.addEventListener('click', (e)=>{
    // Empêche l'ouverture si le clic vient directement d'une action à l'intérieur de la carte, sauf sur le bouton "Voir détails"
    if(e.target.closest('.actions') && !e.target.closest('.open-details')) return;
    const card = e.currentTarget.closest('.sheet');
    if (!card) return;
const titleTxt = card.querySelector('h3')?.textContent || '';
const key = slugifyCategory(titleTxt);
const data = (window.priceDetails || {})[key];

    if(!data) return;
    let html = `<h3 id="detail-title">${data.title}</h3><ul>`;
    data.items.forEach(it=>{ html += `<li><span>${it.label}</span><strong>${cleanPrice(it.price)}</strong></li>`; });
    html += `</ul><p style="text-align:center;margin-top:22px">Ces prix sont indicatifs. <a href="devis.html" style="font-weight:700;color:var(--primary-color)">Demandez un devis personnalisé</a>.</p>`;
    modalDetailsContent.innerHTML = html;
    detailModal.style.display = 'flex';
  });
});
document.getElementById('close-detail-modal').addEventListener('click',()=>detailModal.style.display='none');
detailModal.addEventListener('click',(e)=>{ if(e.target===detailModal) detailModal.style.display='none'; });

/* OVERLAY PARTENAIRES -> REDIRECTION page code */
document.getElementById('logo-overlay-partner').addEventListener('click', ()=>{
  window.location.href = 'tarifs-partenaire.html';
});

/* SWITCH VUE + FILTRES + RECHERCHE */
const sheets = document.getElementById('public-prices');
const btnPile = document.getElementById('btnPile');
const btnGrid = document.getElementById('btnGrid');
const chips = document.getElementById('chips');
const search = document.getElementById('search');

function setView(mode){
  btnPile.classList.toggle('active', mode==='pile');
  btnGrid.classList.toggle('active', mode==='grid');
  sheets.classList.toggle('pile', mode==='pile');
  sheets.classList.toggle('grid', mode==='grid');
}
btnPile.addEventListener('click', ()=>setView('pile'));
btnGrid.addEventListener('click', ()=>setView('grid'));

let activeFilter='*';
function applyFilters(){
  const q = search.value.toLowerCase().trim();
  document.querySelectorAll('#public-prices .sheet').forEach(card=>{
    const cat = card.getAttribute('data-category');
    const text = card.innerText.toLowerCase();
    const passFilter = (activeFilter==='*' || activeFilter===cat);
    const passSearch = (!q || text.includes(q));
    card.style.display = (passFilter && passSearch) ? '' : 'none';
  });
}
chips.addEventListener('click', (e)=>{
  const el = e.target.closest('.chip'); if(!el) return;
  chips.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
  el.classList.add('active');
  activeFilter = el.dataset.filter;
  applyFilters();
});
search.addEventListener('input', applyFilters);

/* **AMÉLIORATION JS** : Bascule en grille par défaut sur les écrans plus petits pour meilleure lisibilité. */
function initialView(){
  // Bascule en grille pour mobile et tablette (jusqu'à 1280px, car la pile 3D ne fonctionne bien qu'en très large)
  if (window.matchMedia('(max-width: 1280px)').matches){
    setView('grid'); 
    btnPile.classList.remove('active');
    btnGrid.classList.add('active');
  } else {
    // Par défaut la vue pile 3D sur grand écran
    setView('pile');
  }
}
window.addEventListener('load', initialView);
window.addEventListener('resize', initialView);
</script>
</body>
</html>
