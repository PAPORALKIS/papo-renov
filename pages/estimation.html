<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Estimation Papo-Rénov</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { max-width: 960px; margin: 40px auto; padding: 16px; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    h2 { margin-bottom: 8px; }
    #result { margin-top: 16px; }
    .muted { color: #666; font-size: .95rem; }
  </style>
</head>
<body>
  <h2>Votre estimation</h2>
  <div class="muted">Générée automatiquement à partir de vos informations et de nos bases tarifaires.</div>
  <div id="result" style="margin-top:24px;">Chargement…</div>

  <script>
    (async () => {
      const params = new URLSearchParams(location.search);
      const id = params.get('id');
      if (!id) {
        document.getElementById('result').textContent = "Identifiant manquant dans l'URL.";
        return;
      }
      // ⚠️ Remplace TON_DEPLOYMENT_ID par l'ID de déploiement de ta Web App
      const endpoint = "https://script.google.com/macros/s/TON_DEPLOYMENT_ID/exec?fn=get&id=" + encodeURIComponent(id);
      try {
        const r = await fetch(endpoint, { method: 'GET' });
        const j = await r.json();
        document.getElementById('result').innerHTML = j.html || "<p>(Aucun contenu trouvé)</p>";
      } catch(e) {
        document.getElementById('result').textContent = "Erreur de récupération: " + e;
      }
    })();
  </script>
</body>
</html>
