<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, 
    viewport-fit=cover" />
  <title>Carrousel 3D - Réalisations</title>
  
  <style>
    /* Valeurs par défaut - desktop */
header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background: white;
  z-index: 10001;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 3px 12px;
  height: 50px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.logo {
  flex-shrink: 0;
  
.logo img {
  max-height: 32px;      /* ✅ plus petit qu’avant */
  width: auto;

}

nav ul {
  list-style: none;
  display: flex;
  flex-wrap: nowrap;     /* ✅ jamais de retour à la ligne */

  gap: 6px;
  margin: 0px;
  padding: 0;
  
}

nav ul li a {
  color: black;
  text-decoration: none;
  font-weight: bold;
  transition: color 0.3s;
  font-size: 12px;
  white-space: nowrap;
}

nav ul li a:hover,
nav ul li a.active {
  color: #ffcc00;
}
  /* Variables CSS pour taille des images, profondeur Z et offset du  */


 html, body {
      margin: 0; 
   height: 100%;
      background: #00010d;       /* fond très sombre */
      overflow: auto;          /* empêche le scroll de la page */
      font-family: sans-serif;
    }

.page-title {
  margin-top: 60px;
  font-size: 22px;
  text-align: center;
  color: white;
  font-weight: bold;
  z-index: 100;
}
  
  
    /* Logo en filigrane au centre en fond avec faible opacité */
    body::before {
  content: ""; /* Pseudo-élément vide pour afficher un élément graphique */
  position: fixed; /* Fixé à l'écran, reste en place même au scroll */
  top: 50%; 
  left: 50%; /* Positionne le centre du logo au centre de la fenêtre */
  width: 300px; height: 300px; /* Taille du logo en fond (ajustable) */
  background: url("../img/logo.png") no-repeat center/contain; /* Affiche le logo centré, sans répétition, redimensionné */
  opacity: 0.2; /* Transparence faible du logo pour un effet discret */
  transform: translate(-50%, -50%); /* Décale le logo pour le centrer parfaitement */
  pointer-events: none; /* Permet aux clics de passer au travers (le logo ne bloque rien) */
  z-index: 0; /* Envoyé tout au fond de la pile d'affichage */
}
    
    /* Conteneur centré pour le carrousel avec perspective 3D */
    .carousel-container {
      position: fixed;
      top: var(--container-top);
      left: var(--container-left);
      transform: translate(var(--container-translate-x), var(--container-translate-y));
      perspective: var(--perspective);  /* profondeur 3D pour effet */
      z-index: 1;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Conteneur des images avec style 3D */
    .carousel {
      position: relative;
      width: 0; 
      height: 0;
      transform-style: preserve-3d;
      transform: rotateX(-4deg); /* légère inclinaison vers l'avant */
      touch-action: pan-y; /* permet de scroll vertical sur mobile sans bloquer */
    }

    /* Style des images */
    .carousel img {
      position: absolute;
      width: var(--img-size);
      height: var(--img-size);
      object-fit: cover;      /* image recadrée en conservant proportions */
      border-radius: 12px;
      box-shadow: 0 0 14px rgba(0, 0, 0, 0.7);
      transition: transform 0.6s ease, z-index 0.6s ease; /* animation douce */
      cursor: pointer;
      z-index: 1;
      transform-origin: center center;
      user-select: none;
      -webkit-user-drag: none;
    }

    /*  léger au survol */
    .carousel img:hover {
      transform: scale(1.1);
      z-index: 10;
    }

  /* Root CSS variables */
    :root {
      --img-size: 150px;
      --translateZ: 900px;
      --offset: -250px;
      --perspective: 3000px;
      --container-top: 30%;
      --container-left: 45%;
      --container-translate-x: -50%;
      --container-translate-y: -49%;
      --camera-tilt: 4deg;
    }
  

@med(max-width: 600px) and (orientation: portrait) {
  :root {
    --img-size: 10vw;
    --translateZ: 320px;
    --offset: -100px;
    --perspective: 2250px;
    --container-top: 50%;
    --container-left: 50%;
    --container-translate-x: -50%;
    --container-translate-y: -50%;
    --camera-tilt: 20deg;
  }
}

/* Smartphones paysage */
@media (max-width: 767px) and (orientation: landscape) {
  :root {
    --img-size: 13vw;
    --translateZ: 320px;
    --offset: -150px;
    --perspective: 2500px;
    --container-top: 50%;
    --container-left: 50%;
    --container-translate-x: -50%;
    --container-translate-y: -50%;
    --camera-tilt: 20deg;
  }
}

/* Tablettes (768px à 1024px) */
@media (min-width: 768px) and (max-width: 1024px) {
  :root {
    --img-size: 6vw;
    --translateZ: 3500px;
    --offset: -400px;
    --perspective: 4500px;
    --container-top: 50%;
    --container-left: 50%;
    --container-translate-x: -50%;
    --container-translate-y: -50%;
    --camera-tilt: 20deg;
  }
}
      </style>
</head>
<body>
  <!-- ===== Entête de page ===== -->
  <header>
    <div class="logo">
      <img src="../img/logo.png" alt="Logo Paporalkis">
    </div>
    <nav>
      <ul>
        <li><a href="../index.html">Accueil</a></li>
        <li><a href="devis.html">Demande de devis</a></li>
        <li><a href="realisations.html">Mes réalisations</a></li>
        <li><a href="tarifs.html">Tarifs</a></li>
        <li><a href="planning.html">Planning</a></li>
        <li><a href="contact.html" class="active">Contact</a></li>
      </ul>
    </nav>
  </header>  <!-- ===== Titre de la page ===== -->
  <div class="page-title">Mes réalisations</div>  <!-- ===== Zoom Overlay (image en grand + vignettes) ===== -->  <div class="zoom-overlay" id="zoomOverlay">
  <div class="carousel-container" id="carousel-container">
    <div class="carousel" id="carousel">
      <!-- Toutes les images à afficher dans le carrousel -->
      <img src="../img/CHBR0.jpg" alt="test" class="carousel__image" />
      <img src="../img/CHBR1.jpg" alt="test" class="carousel__image" />
      <img src="../img/CUIEXT.jpg"  alt="test" class="carousel__image" />
      <img src="../img/CUIEXT1.jpg" alt="test" class="carousel__image" />
      <img src="../img/CUIEXT2.jpg" alt="test" class="carousel__image" />
      <img src="../img/CUIEXT3.jpg" alt="test" class="carousel__image" />
      <img src="../img/CUIEXT4.jpg" alt="test" class="carousel__image" />
      <img src="../img/CUIEXT5.jpg" alt="test" class="carousel__image" />
      <img src="../img/CUIEXT6.jpg" alt="test" class="carousel__image" />
      <img src="../img/CUIMARS1.jpg" alt="test" class="carousel__image" />
      <img src="../img/CUIMARS2.jpg" alt="test" class="carousel__image" />
      <img src="../img/CUIMARS3.jpg" alt="test" class="carousel__image" />
      <img src="../img/CUIMARS4.jpg" alt="test" class="carousel__image" />
      <img src="../img/Iso2.jpg" alt="test" class="carousel__image" />
      <img src="../img/Iso3.jpg" alt="test" class="carousel__image" />
      <img src="../img/Iso4.jpg" alt="test" class="carousel__image" />
      <img src="../img/Iso5.jpg" alt="test" class="carousel__image" />
      <img src="../img/Iso6.jpg" alt="test" class="carousel__image" />
      <img src="../img/SDB1.jpg" alt="test" class="carousel__image" />
      <img src="../img/SDB2.jpg"  alt="test" class="carousel__image"/>
      <img src="../img/SDB3.jpg" alt="test" class="carousel__image" />
      <img src="../img/SDB4.jpg" alt="test" class="carousel__image" />
      <img src="../img/SDB5.jpg" alt="test" class="carousel__image" />
      <img src="../img/WC2.jpg" alt="test" class="carousel__image" />
      <img src="../img/cuisine_exterieure_cyporex.jpg" alt="test" class="carousel__image" />
      <img src="../img/ext1.jpg" alt="test" class="carousel__image" />
      <img src="../img/ext2.jpg" alt="test" class="carousel__image" />
      <img src="../img/exterieur.jpg" alt="test" class="carousel__image" />
      <img src="../img/meuble-laura-1.jpg" alt="test" class="carousel__image" />
      <img src="../img/meuble-laura-2.jpg" alt="test" class="carousel__image" />
      <img src="../img/meuble-laura-3.jpg" alt="test" class="carousel__image" />
      <img src="../img/martegauxavant1.jpg" alt="test" class="carousel__image" />
      <img src="../img/martegauxavant2.jpg" alt="test" class="carousel__image" />
      <img src="../img/martegauxavant3.jpg" alt="test" class="carousel__image" />
      <img src="../img/martegauxB.jpg" alt="test" class="carousel__image" />
      <img src="../img/martegauxC.jpg" alt="test" class="carousel__image" />
      <img src="../img/martegauxD.jpg" alt="test" class="carousel__image" />
      <img src="../img/martegauxE.jpg" alt="test" class="carousel__image" />
      <img src="../img/velaux0.jpg" alt="test" class="carousel__image" />
      <img src="../img/velaux1.jpg" alt="test" class="carousel__image" />
      <img src="../img/velaux2.jpg" alt="test" class="carousel__image" />
      <img src="../img/velaux3.jpg" alt="test" class="carousel__image" />
    </div>
  </div>  
  <script>
    const carousel = document.getElementById("carousel");
    const container = document.getElementById("carousel-container");
    const images = carousel.getElementsByTagName("img");
    const total = images.length;

    function getRootCSSVars() {
      const rootStyles = getComputedStyle(document.documentElement);
      return {
        translateZ: parseInt(rootStyles.getPropertyValue('--translateZ')) || 1000,
        offset: rootStyles.getPropertyValue('--offset') || '-250px',
        perspective: rootStyles.getPropertyValue('--perspective') || '3000px',
        containerTop: rootStyles.getPropertyValue('--container-top') || '30%',
        containerLeft: rootStyles.getPropertyValue('--container-left') || '45%',
        containerTranslateX: rootStyles.getPropertyValue('--container-translate-x') || '-50%',
        containerTranslateY: rootStyles.getPropertyValue('--container-translate-y') || '-49%',
        imgSize: rootStyles.getPropertyValue('--img-size') || '150px'
      };
    }

    function updateContainerStyle() {
      const vars = getRootCSSVars();
      container.style.perspective = vars.perspective;
      container.style.top = vars.containerTop;
      container.style.left = vars.containerLeft;
      container.style.transform = `translate(${vars.containerTranslateX}, ${vars.containerTranslateY})`;
    }

    function updateImageSizes() {
      const vars = getRootCSSVars();
      Array.from(images).forEach(img => {
        img.style.width = vars.imgSize.trim();
        img.style.height = vars.imgSize.trim();
      });
    }

    let baseRadius = 900;
    const Scale = 1.5;
    let angle = 0;
    let autoRotate = true;
    let lastTime = performance.now();
    let velocity = 0;
    const friction = 0.95;
    let isDragging = false;
    let lastX = 0;

    function positionImages() {
      const vars = getRootCSSVars();
      baseRadius = vars.translateZ;
      const offset = vars.offset.trim();
      const angleStep = 360 / total;
      let closestIndex = 0;
      let minDiff = 360;

      for (let i = 0; i < total; i++) {
        const theta = (angleStep * i + angle) % 360;
        const diff = Math.min(Math.abs(theta), Math.abs(360 - theta));
        if (diff < minDiff) {
          minDiff = diff;
          closestIndex = i;
        }
      }

      for (let i = 0; i < total; i++) {
        const theta = angleStep * i + angle;
        const extraRotation = -angleStep * 0.3;

        if (i === closestIndex) {
          images[i].style.transform =
            `rotateY(${theta}deg) translateZ(${baseRadius * 1.6}px) translateY(-20px) rotateY(${extraRotation}deg) scale(${Scale})`;
          images[i].style.zIndex = 100;
          images[i].style.filter = "drop-shadow(0 0 20px rgba(255,255,255,0.6))";
          images[i].style.setProperty('--offset', offset);
        } else {
          images[i].style.transform =
            `rotateY(${theta}deg) translateZ(${baseRadius}px) rotateY(${extraRotation}deg) scale(1)`;
          images[i].style.zIndex = 1;
          images[i].style.filter = "none";
        }
      }
    }

    function animate(now) {
      const delta = now - lastTime;

      if (autoRotate) {
        velocity = 0.0050 * delta;
        angle += velocity;
      } else {
        angle += velocity;
        velocity *= friction;
        if (Math.abs(velocity) < 0.001) {
          autoRotate = true;
          velocity = 0;
        }
      }

      positionImages();
      lastTime = now;
    const carousel = document.getElementById("carousel");
    const container = document.getElementById("carousel-container");
    const images = carousel.getElementsByTagName("img");
    const total = images.length;
    const Scale = 1.5;
    let baseRadius = 900;
    let angle = 0;
    let autoRotate = true;
    let lastTime = performance.now();
    let velocity = 0;
    const friction = 0.95;
    let isDragging = false;
    let lastX = 0;

    function getRootCSSVars() {
      const styles = getComputedStyle(document.documentElement);
      return {
        translateZ: parseInt(styles.getPropertyValue('--translateZ')),
        offset: styles.getPropertyValue('--offset'),
        perspective: styles.getPropertyValue('--perspective'),
        containerTop: styles.getPropertyValue('--container-top'),
        containerLeft: styles.getPropertyValue('--container-left'),
        containerTranslateX: styles.getPropertyValue('--container-translate-x'),
        containerTranslateY: styles.getPropertyValue('--container-translate-y'),
        imgSize: styles.getPropertyValue('--img-size')
      };
    }

    function updateContainerStyle() {
      const vars = getRootCSSVars();
      container.style.perspective = vars.perspective;
      container.style.top = vars.containerTop;
      container.style.left = vars.containerLeft;
      container.style.transform = `translate(${vars.containerTranslateX}, ${vars.containerTranslateY})`;
    }

    function updateImageSizes() {
      const vars = getRootCSSVars();
      Array.from(images).forEach(img => {
        img.style.width = vars.imgSize.trim();
        img.style.height = vars.imgSize.trim();
      });
    }

    function positionImages() {
      const vars = getRootCSSVars();
      baseRadius = vars.translateZ;
      const angleStep = 360 / total;
      for (let i = 0; i < total; i++) {
        const theta = angleStep * i + angle;
        images[i].style.transform = `rotateY(${theta}deg) translateZ(${baseRadius}px)`;
      }
    }

    function animate(now) {
      const delta = now - lastTime;
      if (autoRotate) {
        velocity = 0.005 * delta;
        angle += velocity;
      } else {
        angle += velocity;
        velocity *= friction;
        if (Math.abs(velocity) < 0.001) {
          autoRotate = true;
          velocity = 0;
        }
      }
      positionImages();
      lastTime = now;
      requestAnimationFrame(animate);
    }

    function restartAutoRotate() {
      clearTimeout(interactionTimeout);
      interactionTimeout = setTimeout(() => {
        autoRotate = false;
        velocity = 0.02;
      }, 2000);
    }

    container.addEventListener("wheel", (e) => {
      e.preventDefault();
      autoRotate = false;
      velocity += e.deltaY * 0.003;
      restartAutoRotate();
    });

    container.addEventListener("mousedown", (e) => {
      isDragging = true;
      lastX = e.clientX;
      autoRotate = false;
      velocity = 0;
    });

    window.addEventListener("mouseup", () => {
      if (isDragging) {
        isDragging = false;
        restartAutoRotate();
      }
    });

    window.addEventListener("mousemove", (e) => {
      if (isDragging) {
        const dx = e.clientX - lastX;
        velocity = dx * 0.5;
        angle += velocity;
        lastX = e.clientX;
      }
    });

    window.addEventListener('resize', () => {
      updateContainerStyle();
      updateImageSizes();
      positionImages();
    });

    let interactionTimeout;
    updateContainerStyle();
    updateImageSizes();
    positionImages();
    requestAnimationFrame(animate);
  </script>
</body>
</html>
