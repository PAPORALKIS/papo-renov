<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Planning - Papo R√©nov</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../style.css"><link rel="preconnect" href="https://cdnjs.cloudflare.com">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<style>
/* =========================
   PALETTE / BASE
   ========================= */
:root{
  --primary-color:#007bff;
  --secondary-color:#212529;
  --background-light:#f4f7f9;
  --card-background:#ffffff;
  --price-accent:#28a745;
  --accent-orange:#ffc107;
  --border-light:#e9ecef;
  --shadow-color:rgba(0,0,0,.16);
  --dark-blue-logo:#0a1f44;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  font-family:'Poppins',sans-serif;
  background:var(--background-light);
  color:var(--secondary-color);
  line-height:1.6;
  min-width:320px;
}

/* Nav active (conserve ton style) */
nav ul li a.active{color:var(--primary-color);font-weight:700}

/* =========================
   MASQUAGE DE LA BARRE DE D√âFILEMENT
   ========================= */
nav ul {
  -ms-overflow-style: none;
  scrollbar-width: none;
  overflow-x: auto;
}
nav ul::-webkit-scrollbar { display: none; }

/* =========================
   SECTION HERO (TABLETTE)
   ========================= */
.content-section{
  padding:20px 20px 40px;
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
  position:relative;
}
h1{
  color:var(--secondary-color);
  margin:0 0 14px;
  font-weight:800;
  font-size:1.2rem;
}
h1::after{
  content:'';
  display:block;width:80px;height:4px;background:var(--primary-color);
  margin:18px auto 0;border-radius:2px;
}

/* ---------------------------------------------------------------- */
/* Am√©liorations sp√©cifiques √† la page Planning                     */
/* ---------------------------------------------------------------- */
.main-content-wrap {
  max-width: 1200px;
  margin: 20px auto;
  padding: 20px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
}
.main-content-wrap h1 {
  text-align: center;
  font-size: 2.5rem;
  color: #003366;
  margin-bottom: 10px;
}
.main-content-wrap > p {
  text-align: center;
  font-size: 1.1rem;
  color: #555;
  margin-bottom: 30px;
}
.main-content-wrap h2 {
  margin-top: 40px;
  margin-bottom: 25px;
  font-size: 1.8rem;
  color: #003366;
  text-align: center;
}

/* Calendrier + iFrame */
.calendar-wrap { padding: 0 8px; }

/* ===== Mini calendrier cliquable (ajout√©) ===== */
.mini-cal {
  max-width: 700px;
  margin: 0 auto 16px auto;
  background:#fff;
  border:1px solid #e6e8ec;
  border-radius:12px;
  box-shadow:0 6px 16px rgba(0,0,0,.06);
  overflow:hidden;
}
.mini-cal-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 14px;border-bottom:1px solid #eef0f3;
}
.mini-cal-header .title{font-weight:700}
.mini-cal-header button{
  border:0;background:transparent;cursor:pointer;font-size:1.1rem;padding:6px 10px;
}
.mini-cal-grid{
  display:grid;
  grid-template-columns: repeat(7, 1fr);
  gap:6px;
  padding:10px;
}
.mini-cal .dow{font-weight:600;font-size:.85rem;text-align:center;color:#667085}
.mini-cal .day{
  text-align:center;padding:10px 0;border-radius:8px;cursor:pointer;
  border:1px solid transparent;user-select:none;
}
.mini-cal .day:hover{border-color:#c9defd;background:#f3f8ff}
.mini-cal .day.disabled{opacity:.35;cursor:not-allowed}
.mini-cal .day.today{outline:2px solid var(--primary-color);outline-offset:2px;border-radius:10px}

/* iFrame Google Calendar */
.calendar-wrap iframe {
  width: 100%;
  height: 450px; /* Hauteur r√©duite pour √©viter le d√©filement */
  border: 1px solid #ccc;
  border-radius: 8px;
}

/* Boutons SOS */
.sos-buttons {
  display: flex;
  gap: 20px;
  margin: 30px auto;
  flex-wrap: wrap;
  justify-content: center;
}
.sos-buttons button {
  flex: 1;
  min-width: 250px;
  padding: 14px 22px;
  font-weight: 600;
  font-size: 1.05rem;
  border: 0;border-radius: 30px;
  color: #fff;cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}
.sos-buttons button:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(0,0,0,0.15);}
.sos-poseur { background: #d32f2f; }
.sos-sav { background: #fbc02d; color: #333; }
.sos-derniere-minute { background: #388e3c; }

/* Formulaire existant */
.reservation-form {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 15px 25px;
  max-width: 700px;
  margin: 0 auto;
  padding: 15px;
  text-align: left;
}
.reservation-form label {
  font-weight: 600;color: #003366;align-self: flex-start;padding-top: 5px;
}
.reservation-form input[type="text"],
.reservation-form input[type="email"],
.reservation-form input[type="date"],
.reservation-form textarea {
  padding: 0.6rem;border: 1px solid #ccc;border-radius: 6px;font-size: 1rem;width: 100%;box-sizing: border-box;resize: vertical;
}
.reservation-form textarea { grid-column: 2 / 3; }
.cta-button {
  grid-column: 1 / -1;background-color: #003366;color: white;padding: 0.75rem;border: none;border-radius: 6px;cursor: pointer;font-weight: 600;font-size: 1.1rem;transition: background-color 0.3s ease;margin-top: 15px;
}
.cta-button:hover { background-color: #00509e; }
.form-info { grid-column: 1 / -1;font-size: 0.9em;color: #888;text-align: center;margin-top: -10px; }

/* ===== MODAL formulaire (ajout√©) ===== */
.modal {
  position: fixed; inset: 0; background: rgba(0,0,0,.45);
  display: none; align-items: center; justify-content: center; padding: 16px; z-index: 9999;
}
.modal.open{ display: flex; }
.modal-card{
  width: 95%; max-width: 720px; background:#fff; border-radius: 14px;
  box-shadow: 0 16px 40px rgba(0,0,0,.25); overflow: hidden;
}
.modal-head{
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 18px;border-bottom:1px solid #eef0f3;background:#f9fbff;
}
.modal-title{font-weight:800}
.modal-close{
  border:0;background:transparent;font-size:1.2rem;cursor:pointer;padding:6px 10px;
}

/* Footer */
footer {
  text-align: center;padding: 20px 1rem;background-color: #003366;color: #fff;
  font-size: 0.9rem;margin-top: 40px;max-width: none;
}

/* Responsive */
@media (max-width: 900px) {
  header nav ul { gap: 1rem; justify-content: center; margin-top: 10px; }
  header { flex-direction: column;text-align: center; }
}
@media (max-width: 768px) {
  .reservation-form { grid-template-columns: 1fr; gap: 10px; padding: 0; }
  .reservation-form label { grid-column: 1 / -1; padding-top: 0; }
  .reservation-form input, .reservation-form textarea { grid-column: 1 / -1; }
  .calendar-wrap iframe { height: 350px; }
  .sos-buttons button { min-width: unset; width: 100%; max-width: 350px; }
}
</style>
</head>
<body>

<header>
  <div class="logo">
    <img src="../img/logo.png" alt="Logo Papo R√©nov" />
  </div>
  <nav>
    <ul>
      <li><a href="../index.html">Accueil</a></li>
      <li><a href="devis.html">Demande de devis</a></li>
      <li><a href="realisations.html">Mes r√©alisations</a></li>
      <li><a href="tarifs.html">Tarifs</a></li>
      <li><a class="active" href="planning.html">Planning</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="avis.html">Avis clients</a></li>
      <li><a href="courtage-cuisine.html">Courtage Cuisine</a></li>
    </ul>
  </nav>
</header>

<main class="main-content-wrap">
  <h1>Planning</h1>
  <p>Consultez mes disponibilit√©s ci-dessous :</p>

  <div class="calendar-wrap">

    <!-- ===== Mini calendrier cliquable (ajout√©) ===== -->
    <div class="mini-cal" id="miniCal" aria-label="S√©lecteur de date">
      <div class="mini-cal-header">
        <button type="button" id="calPrev" aria-label="Mois pr√©c√©dent">‚Äπ</button>
        <div class="title" id="calTitle">Mois Ann√©e</div>
        <button type="button" id="calNext" aria-label="Mois suivant">‚Ä∫</button>
      </div>
      <div class="mini-cal-grid" id="calGrid">
        <!-- Jours de la semaine -->
      </div>
    </div>
    <!-- / mini calendrier -->

    <iframe
      src="https://calendar.google.com/calendar/embed?src=kpaporalkis.pro%40gmail.com&ctz=Europe%2FParis"
      frameborder="0" scrolling="no">
    </iframe>
  </div>

  <div class="sos-buttons">
    <button class="sos-poseur">üö® SOS POSEUR</button>
    <button class="sos-sav">üõ†Ô∏è SOS SAV</button>
    <button class="sos-derniere-minute">‚ö° SOS DISPO DERNI√àRE MINUTE</button>
  </div>

  <h2>R√©server une date</h2>
  <form action="https://formspree.io/f/mpwrpypd" method="POST" class="reservation-form" id="formBasPage">
    <input type="hidden" name="_captcha" value="false" />
    <input type="hidden" name="_next" value="https://paporalkis.github.io/papo-renov/pages/confirmation.html" />

    <label for="name">Nom :</label>
    <input id="name" type="text" name="name" required />

    <label for="email">Email :</label>
    <input id="email" type="email" name="email" required />

    <label for="date">Date souhait√©e :</label>
    <input id="date" type="date" name="date" required />

    <label for="message">Message compl√©mentaire :</label>
    <textarea id="message" name="message" rows="4" placeholder="Pr√©cisez vos besoins..."></textarea>

    <button type="submit" class="cta-button">Envoyer la demande</button>
    <p class="form-info">* Vous recevrez une r√©ponse de confirmation par e-mail.</p>
  </form>
</main>

<!-- ===== MODAL formulaire (ajout√©) ===== -->
<div class="modal" id="modal">
  <div class="modal-card">
    <div class="modal-head">
      <div class="modal-title">R√©server une date</div>
      <button class="modal-close" id="modalClose" aria-label="Fermer">‚úï</button>
    </div>
    <form action="https://formspree.io/f/mpwrpypd" method="POST" class="reservation-form" id="modalForm">
      <input type="hidden" name="_captcha" value="false" />
      <input type="hidden" name="_next" value="https://paporalkis.github.io/papo-renov/pages/confirmation.html" />

      <label for="m_name">Nom :</label>
      <input id="m_name" type="text" name="name" required />

      <label for="m_email">Email :</label>
      <input id="m_email" type="email" name="email" required />

      <label for="m_date">Date souhait√©e :</label>
      <input id="m_date" type="date" name="date" required />

      <label for="m_message">Message compl√©mentaire :</label>
      <textarea id="m_message" name="message" rows="4" placeholder="Pr√©cisez vos besoins..."></textarea>

      <button type="submit" class="cta-button">Envoyer la demande</button>
      <p class="form-info">* Vous recevrez une r√©ponse de confirmation par e-mail.</p>
    </form>
  </div>
</div>

<footer>
  <p>&copy; 2025 Paporalkis - Tous droits r√©serv√©s</p>
</footer>

<script>
(function(){
  // ===== Utilitaires de date
  const pad = n => String(n).padStart(2,'0');
  const toInputValue = (d)=>`${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;

  // ===== Mini calendrier
  const grid = document.getElementById('calGrid');
  const title = document.getElementById('calTitle');
  const btnPrev = document.getElementById('calPrev');
  const btnNext = document.getElementById('calNext');

  let view = new Date(); // mois affich√©

  function renderCalendar(date){
    // En-t√™tes jours
    const dows = ['Lun','Mar','Mer','Jeu','Ven','Sam','Dim'];
    grid.innerHTML = '';
    dows.forEach(txt=>{
      const el = document.createElement('div');
      el.className='dow';
      el.textContent=txt;
      grid.appendChild(el);
    });

    const y = date.getFullYear();
    const m = date.getMonth();
    title.textContent = new Intl.DateTimeFormat('fr-FR',{month:'long', year:'numeric'}).format(date);

    const first = new Date(y,m,1);
    const startIdx = (first.getDay() + 6) % 7; // Lundi=0
    const daysInMonth = new Date(y, m+1, 0).getDate();

    // jours vides avant
    for(let i=0;i<startIdx;i++){
      const empty = document.createElement('div');
      empty.className='day disabled';
      empty.textContent=' ';
      grid.appendChild(empty);
    }

    // jours du mois
    const todayStr = toInputValue(new Date());
    for(let d=1; d<=daysInMonth; d++){
      const el = document.createElement('div');
      el.className='day';
      el.textContent = d;
      const dayDate = new Date(y,m,d);
      const val = toInputValue(dayDate);
      if(val===todayStr) el.classList.add('today');

      el.addEventListener('click', ()=> openModalWithDate(val));
      grid.appendChild(el);
    }
  }

  btnPrev.addEventListener('click', ()=>{ view.setMonth(view.getMonth()-1); renderCalendar(view); });
  btnNext.addEventListener('click', ()=>{ view.setMonth(view.getMonth()+1); renderCalendar(view); });

  renderCalendar(view);

  // ===== Modal + pr√©-remplissage
  const modal = document.getElementById('modal');
  const modalClose = document.getElementById('modalClose');
  const mDate = document.getElementById('m_date');
  const mName = document.getElementById('m_name');
  const mEmail = document.getElementById('m_email');
  const mMsg = document.getElementById('m_message');

  function openModalWithDate(dateStr){
    mDate.value = dateStr;
    modal.classList.add('open');
    // Focus premier champ utile
    (mName.value ? (mEmail.value? mMsg : mEmail) : mName).focus();
  }
  function closeModal(){ modal.classList.remove('open'); }

  modalClose.addEventListener('click', closeModal);
  modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

  // Optionnel pratique : cliquer sur le champ "Date souhait√©e" du formulaire bas de page ouvre le modal
  const baseDateInput = document.getElementById('date');
  baseDateInput.addEventListener('focus', ()=> {
    // Si l‚Äôutilisateur pr√©f√®re, on peut prendre la valeur courante
    if(baseDateInput.value) mDate.value = baseDateInput.value;
    modal.classList.add('open');
  });

  // Quand on soumet le formulaire du modal, on n‚Äôalt√®re rien d‚Äôautre (action identique).
})();
</script>

</body>
</html>